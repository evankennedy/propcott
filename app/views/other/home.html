{{#partial "title"}}Propcott{{/partial}}

{{#partial "content"}}
<div class="container" style="margin-top: 1em;">
	<div class="row">
		<div class="col-7">
			<div id="featured">
				<h2>Reinventing Boycotts</h2>
				<div class="buttons">
					<a href="/new">Start a Propcott</a>
					<a href="/about">Learn More</a>
				</div>
			</div>
		</div>
		<div class="col-5" style="vertical-align: top; padding-left: 1em;">
			<div id="rightbar">
				<div class="tabs">
					{{#tabs}}
					<button id="tab-{{id}}-button"{{#active}} class="active"{{/active}}>{{name}}</button>
					{{/tabs}}
				</div>
				{{#tabs}}
					<div id="tab-{{id}}" class="tablist"{{#active}} style="display: none;"{{/active}}>
						{{#propcotts}}
							<div style="margin-bottom: 1em; clear: both;">
								{{#media}}
								<div class="propcott-media" style="background-image: url('http://static.propcott.com/{{ propcott.media_link }}');"></div>
								{% elseif propcott.media_type == 'video' %}
								<div class="propcott-media" style="background-image: url('http://img.youtube.com/vi/{{ propcott.media_link }}/mqdefault.jpg');"></div>
								{% else %}
								<div class="propcott-media" style="background-color: #aaa;"></div>
								{% endif %}
								{{/media}}
								<div style="overflow:hidden; font-size: .9em;">
									<a href="/p/{{slug}}">{{title}}</a>
									<p>Targeting {{target}}<br>
									<span style="color: #B51010;">{{supporters}} supporters</span></p>
								</div>
							</div>
						{{/propcotts}}
						{{#link}}
						<p style="text-align: right;margin-bottom: 0;"><a href="{{href}}">View more...</a></p>
						{{/link}}
					</div>
				{{/tabs}}
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
var tabs = [];
for(var i=0; i<tabs.length; i++) (function(index) {
	document.getElementById('tab-' + tabs[index] + '-button').onclick = function() {
		for(var i=0; i<tabs.length; i++) {
			var tab = document.getElementById('tab-' + tabs[i] + '-button');
			if(tab != this) {
				document.getElementById('tab-' + tabs[i]).style.display = 'none';
				tab.className = '';
			}
		}
		document.getElementById('tab-' + tabs[index]).style.display = '';
		this.className = 'active';
	};
})(i);
</script>
{{/partial}}

{{> base}}
